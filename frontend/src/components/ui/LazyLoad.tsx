'use client';\n\nimport { ReactNode, Suspense, lazy } from 'react';\nimport { motion } from 'framer-motion';\n\n// Optimized loading component with skeleton\ninterface LazyWrapperProps {\n  children: ReactNode;\n  fallback?: ReactNode;\n  className?: string;\n}\n\nexport function LazyWrapper({ \n  children, \n  fallback, \n  className = '' \n}: LazyWrapperProps) {\n  const defaultFallback = (\n    <div className={`animate-pulse ${className}`}>\n      <div className=\"bg-gray-200 rounded-lg h-32 w-full\"></div>\n    </div>\n  );\n\n  return (\n    <Suspense fallback={fallback || defaultFallback}>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.2 }}\n        className={className}\n      >\n        {children}\n      </motion.div>\n    </Suspense>\n  );\n}\n\n// Intersection Observer hook for lazy loading\nimport { useEffect, useRef, useState } from 'react';\n\nexport function useIntersectionObserver(\n  threshold: number = 0.1,\n  rootMargin: string = '50px'\n) {\n  const [isVisible, setIsVisible] = useState(false);\n  const elementRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.unobserve(element);\n        }\n      },\n      {\n        threshold,\n        rootMargin,\n      }\n    );\n\n    observer.observe(element);\n    return () => observer.unobserve(element);\n  }, [threshold, rootMargin]);\n\n  return { isVisible, elementRef };\n}\n\n// Lazy loading component with intersection observer\ninterface LazyLoadProps {\n  children: ReactNode;\n  className?: string;\n  fallback?: ReactNode;\n  threshold?: number;\n  rootMargin?: string;\n}\n\nexport function LazyLoad({ \n  children, \n  className = '', \n  fallback, \n  threshold = 0.1, \n  rootMargin = '50px' \n}: LazyLoadProps) {\n  const { isVisible, elementRef } = useIntersectionObserver(threshold, rootMargin);\n\n  const defaultFallback = (\n    <div className={`animate-pulse ${className}`}>\n      <div className=\"bg-gray-200 rounded-lg h-20 w-full\"></div>\n    </div>\n  );\n\n  return (\n    <div ref={elementRef} className={className}>\n      {isVisible ? (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, ease: [0.4, 0, 0.2, 1] }}\n        >\n          {children}\n        </motion.div>\n      ) : (\n        fallback || defaultFallback\n      )}\n    </div>\n  );\n}\n\n// Image lazy loading with optimized loading states\nimport Image from 'next/image';\nimport { useState } from 'react';\n\ninterface OptimizedImageProps {\n  src: string;\n  alt: string;\n  width?: number;\n  height?: number;\n  className?: string;\n  priority?: boolean;\n}\n\nexport function OptimizedImage({\n  src,\n  alt,\n  width,\n  height,\n  className = '',\n  priority = false,\n}: OptimizedImageProps) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n\n  const handleLoad = () => setIsLoading(false);\n  const handleError = () => {\n    setIsLoading(false);\n    setHasError(true);\n  };\n\n  if (hasError) {\n    return (\n      <div className={`bg-gray-100 rounded-lg flex items-center justify-center ${className}`}>\n        <div className=\"text-gray-400 text-sm\">Failed to load image</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`relative ${className}`}>\n      {isLoading && (\n        <div className=\"absolute inset-0 bg-gray-200 animate-pulse rounded-lg\" />\n      )}\n      <Image\n        src={src}\n        alt={alt}\n        width={width}\n        height={height}\n        className={`transition-opacity duration-300 ${\n          isLoading ? 'opacity-0' : 'opacity-100'\n        } ${className}`}\n        onLoad={handleLoad}\n        onError={handleError}\n        priority={priority}\n        quality={85}\n        placeholder=\"blur\"\n        blurDataURL=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAAABATH8QAhEQACAQIEBAMAAAAAAAAAAAABAgADBAUREiETUSJik8H/2gAMAwEAAhEDEQA/AO6ZuhiOztXCqiAKoUaCpW10dIIjdCkO=\"\n        sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n      />\n    </div>\n  );\n}\n\n// Code splitting utility for heavy components\nexport function createLazyComponent<T extends Record<string, any>>(\n  importFn: () => Promise<{ default: React.ComponentType<T> }>\n) {\n  return lazy(importFn);\n}